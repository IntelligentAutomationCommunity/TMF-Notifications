[![](https://img.shields.io/badge/Cortex-LivePortal-ff6600?logo=data:image/png;base64,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)](https://www.cortex-ia.com/our-software) 
[![](https://img.shields.io/badge/LinkedIn-Cortex-blue.svg?logo=linkedin)](https://www.linkedin.com/company/cortex-intelligent-automation-software/)
[![](https://img.shields.io/badge/Cortex-Blog-a0c326?logo=data:image/png;base64,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)](https://www.cortex-ia.com/latest-news-at-cortex/)

# TMF-Notifications
This provides a set of sub-tasks and flows to implement TM Forum OpenAPI Notifications functionality. Client Cortex automation flows that wish to utilise this functionality have two entry points:
1. The TMF-Notifications-Create-Event subtask is used to create a TM Forum notification event. The client Cortex automationflow should add the output from this subtask to a list.
2. The TMF-Notifications-Notify-Listeners-Event-List Cortex automation Flow should be executed (probably asynchronously), passing the list as an input parameter.

# TMF-Notifications-Create-Event
This subtask accepts the following parameters:
Input parameter Name | Description | Type | M/O |
-----------|-------------|------|-----|
**i_eventType**| The name of the event (e.g., PartyPrivacyProfileCreateEvent)| Text | M
**i_title**| The title of the event| Text| O
**i_description**| The description of the event | Text|O
**i_priority** | The priortity of the event | Text |O
**i_correlationId**| The corrlation id of the event| Text |O
**i_domain**| The domain of the event | Text | O
**i_related-object**| The TM Forum object related to the event| Structure| M
**i_related-object-type**| The type of the related object (e.g. PartyPrivacyProfile)|Text|M
**i_related-object-specification**| The structure-to-JSON mapping for the related object, as described in the [CTX-Convert-to-JSON repository](https://github.com/IntelligentAutomationCommunity/Cortex-convert-to-JSON)| Structure|M

The subtask returns the following parameters:
Output parameter Name | Description | Type |
-----------|-------------|------|
**o_TMF-Event-Notification**|An internal representation of the event|Structure

# TMF-Notifications-Notify-Listeners-Event-List
This flow should be started to issue notifications to listeners. It accepts the following input parameters:
Input parameter Name | Description | Type | M/O |
-----------|-------------|------|-----|
**i_event-list**|A list of the structures returned by multiple calls to the **TMF-Notifications-Create-Event** subtask| List|M

No output parameters are returned.

## Listeners
Listeners should be inserted into the **TMF-Listener** table; only listeners which have a null deleteTime field value will be notified.

## Query fields
This notification implementation supports use of the query field in the the URL of the Listener registration request. Listeners may elect to query on top-level fields in either the event or the related object; e.g. setting **eventType=PartyPrivacyProfileCreateEvent&event.id=12345678-ABCF-ABCD-ACBD-12345678** will result in receiving notifications when a PartyPrivacyProfile with id value **12345678-ABCD-ABCD-ABCD-12345678** is created.

## Response filtering
This notification implementation wupports the use of the **fields** element in the URL of the Listener registration request. If the **fields** element is not present, then all fields in both the event and the related object are included in the notification. If **fields** is present and set to **none** then only the **id** and **href** of the event object will be issued in the notification. Otherwise, fields is a list of top-level fields in either the event or the related object that wil be included in the notification. For example, including **fields=eventType,event.id,event.creationDate** in the Listener registration will cause notifications to include just the **eventType** field of the event, and the **id** and **creationDate** field of the related event.

# Installation Instructions
This package utilises functionality from the following packages;
1. [CTX-Configuration-Store](https://github.com/CortexIntelligentAutomation/CTX-Configuration-Store)
2. [CTX-Logging](https://github.com/CortexIntelligentAutomation/CTX-Logging)
3. [CTX-Convert-to-JSON](https://github.com/IntelligentAutomationCommunity/Cortex-convert-to-JSON)

Download the three SQL table creation scripts, and execute them to create the tables in a database. Modify the **ConnectionString** configuration variable in the **TMF-Notifications** area of the CTX-Configuration-Store.
Download the Studio Package file and Import it into your Cortex Environment.
Autogenerate any required subtasks for TM Forum OpenAPIs; extend the state **Notify-Listener** in the flow **TMF-Notification-Notify-One-Listener** to handle the specific notifications required, following the approach outlined for the PartyPrivacyProfile related notifications
Modify
Don't forget to apply rights using the Studio Authorization module.

:thumbsup: Enjoy! :wink:

